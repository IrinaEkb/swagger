!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t:e.jQuery&&t(e.jQuery)}(this,function(e){return e.fn.tab=function(t){var a={triggerEvents:"click",statusFieldSelector:"",statusHashTemplate:"",statusHashSeparator:"&",fixedHeight:!1,showTopLabel:!0,showBottomLabel:!1,titleSelector:"h1,h2,h3,h4,h5,h6",titleContentFilter:function(){return this.text()},keepTitleVisible:!1,containerTemplate:'<div class="tab-container"></div>',labelContainerTemplate:'<div class="label-container {position}"></div>',labelItemTemplate:'<span class="label-item"></span>',labelActiveClass:"label-active",labelInactiveClass:"label-inactive",pageContainerTemplate:'<div class="page-container"></div>',pageItemTemplate:'<div class="page-item"></div>',pageActiveClass:"page-active",showPageItem:function(e){return e&&e.show&&e.show()},hidePageItem:function(e){return e&&e.hide&&e.hide()},beforeSwitch:null,afterSwitch:null},i=e.extend({},a,t),n=function(t){for(var a=t[0];a.hasChildNodes();)a=a.firstChild;return e(a)},l=function(t){var a,l,s=0,r=e(i.containerTemplate);i.showTopLabel&&(a=e(i.labelContainerTemplate.replace("{position}","top")),r.append(a),l=n(a));var o=e(i.pageContainerTemplate);r.append(o);var c,h,p=n(o);for(i.showBottomLabel&&(c=e(i.labelContainerTemplate.replace("{position}","bottom")),r.append(c),h=n(c));;){var u=t.find(i.titleSelector).first();if(0===u.length)break;i.keepTitleVisible?u.show():u.hide();var d=e(i.labelItemTemplate),f=n(d);f.html(i.titleContentFilter.call(u,u)),l&&l.append(d.clone()),h&&h.append(d.clone());var v=e(u).add(u.nextUntil(i.titleSelector)),m=e(i.pageItemTemplate),g=n(m);g.append(v),p.append(m),s++}t.prepend(r);var b=function(){if(i.fixedHeight){var t=0;p.children().each(function(){var a=e(this),i=a[0].scrollHeight;i>t&&(t=i)}).height(t)}};b();var C=function(){return s},T=function(){return y},w=function(e,t){if(isFinite(t))return e.children(":eq("+t+")")},I=function(t){return l?w(l,t):e([])},H=function(t){return h?w(h,t):e([])},S=function(e){return I(e).add(H(e))},x=function(e){if(isFinite(e))return p.children(":eq("+e+")")},y=-1,F=function(e){"function"==typeof i.beforeSwitch&&i.beforeSwitch(y,e);var t=S(e);t.addClass(i.labelActiveClass).removeClass(i.labelInactiveClass),t.siblings().addClass(i.labelInactiveClass).removeClass(i.labelActiveClass);var a=x(e),n=a.siblings();if("function"==typeof i.hidePageItem&&i.hidePageItem(n),n.removeClass(i.pageActiveClass),"function"==typeof i.showPageItem&&i.showPageItem(a),a.addClass(i.pageActiveClass),N.val(e),i.statusHashTemplate){var l=location.hash,s=i.statusHashTemplate+e;l.indexOf(i.statusHashTemplate)>-1?l=l.replace(new RegExp(i.statusHashTemplate+"\\d+"),s):(l.length&&(l+=i.statusHashSeparator),l+=i.statusHashTemplate+e),location.hash=l}"function"==typeof i.afterSwitch&&i.afterSwitch(y,e),y=e},L=function(){var t=e(this),a=t.index();a!==y&&F(a)};l&&l.children().on(i.triggerEvents,L),h&&h.children().on(i.triggerEvents,L);var N=t.find(i.statusFieldSelector);N.length||(N=e(i.statusFieldSelector));var P=NaN;if(N.each(function(){var t=e(this).val();if(t.length&&isFinite(t))return P=parseInt(t),!1}),isNaN(P)&&i.statusHashTemplate){var A=new RegExp(i.statusHashTemplate+"(\\d+)"),j=location.hash.match(A);j&&j[1]&&(P=parseInt(j[1]))}isNaN(P)&&(P=0);var q=s-1;P>q&&(P=q),F(P);var E={getCount:C,getCurrentIndex:T,getTopLabel:I,getBottomLabel:H,getTopBottomLabels:S,getPage:x,updateFixedHeight:b,switchTo:F};t.data("jquery-tab-controller",E),r.data("jquery-tab-controller",E)},s=this;return s.length&&s.each(function(){var t=e(this);l(t)}),s},e});